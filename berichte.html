<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Einsatzberichte – A-23 „Krayt“</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet" />
<style>
  body {
    background: #000;
    color: #e0e0e0;
    font-family: Orbitron, sans-serif;
    padding: 40px;
  }
  h1 {
    color: #ffe81f;
    text-align: center;
  }
  .bericht {
    border: 1px solid #00bfff66;
    padding: 20px;
    margin: 20px 0;
    background: rgba(20, 20, 40, 0.75);
    position: relative;
  }
  #form-container {
    display: none;
    margin-bottom: 30px;
  }
  textarea {
    width: 100%;
    height: 100px;
  }
  input[type="text"] {
    width: 100%;
    margin-bottom: 10px;
    padding: 8px;
  }
  button {
    background: #00bfff;
    border: none;
    color: black;
    padding: 10px 20px;
    font-weight: bold;
    cursor: pointer;
  }
  #login-container {
    text-align: center;
    margin-bottom: 30px;
  }
  #password {
    font-size: 16px;
    padding: 8px;
  }
  .bericht-title {
    font-weight: bold;
    font-size: 1.2em;
    margin: 10px 0;
    color: #ffe81f;
  }
  .delete-btn {
    float: right;
    margin-top: -30px;
    background: #ff4444;
    border: none;
    color: white;
    padding: 6px 10px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.9em;
  }
  .delete-btn:hover {
    background: #cc0000;
  }
</style>
</head>
<body>

<h1>Einsatzberichte – A-23 „Krayt“</h1>

<div id="login-container">
  <input type="password" id="password" placeholder="Passwort eingeben" />
  <button onclick="checkPassword()">Login</button>
</div>

<div id="form-container">
  <h2>Neuen Bericht verfassen</h2>
  <input type="text" id="rang" placeholder="Rang" />
  <input type="text" id="name" placeholder="Name" />
  <input type="text" id="titel" placeholder="Titel des Berichts" />
  <textarea id="bericht-text" placeholder="Bericht eingeben..."></textarea><br />
  <button onclick="sendeBericht()">Senden</button>
</div>

<div id="berichte">
  <!-- Hier werden Berichte angezeigt -->
</div>

<script>
  const korrektesPasswort = "3515";
  const berichteContainer = document.getElementById("berichte");

  function checkPassword() {
    const eingabe = document.getElementById("password").value;
    if (eingabe === korrektesPasswort) {
      document.getElementById("login-container").style.display = "none";
      document.getElementById("form-container").style.display = "block";
      ladeBerichte();
    } else {
      alert("Falsches Passwort!");
    }
  }

  function sendeBericht() {
    const text = document.getElementById("bericht-text").value.trim();
    const titel = document.getElementById("titel").value.trim();
    const rang = document.getElementById("rang").value.trim();
    const name = document.getElementById("name").value.trim();
    if (!text || !titel || !rang || !name) return alert("Alle Felder ausfüllen!");

    let berichte = JSON.parse(localStorage.getItem("berichte") || "[]");
    berichte.unshift({ text, titel, rang, name, zeit: new Date().toLocaleString() });
    localStorage.setItem("berichte", JSON.stringify(berichte));

    document.getElementById("bericht-text").value = "";
    document.getElementById("titel").value = "";
    document.getElementById("rang").value = "";
    document.getElementById("name").value = "";
    ladeBerichte();
  }

  function ladeBerichte() {
    berichteContainer.innerHTML = "";
    let berichte = JSON.parse(localStorage.getItem("berichte") || "[]");
    if (berichte.length === 0) {
      berichteContainer.innerHTML = "<p style='text-align:center; color:#888;'>Keine Berichte vorhanden.</p>";
      return;
    }
    berichte.forEach((bericht, index) => {
      const div = document.createElement("div");
      div.className = "bericht";
      const zeitKurz = bericht.zeit.split(',')[0];

      const titleHTML = `
        <small>${zeitKurz}</small>
        <div class="bericht-title">${bericht.titel}</div>
        <small>${bericht.rang} ${bericht.name}</small>
      `;
      div.innerHTML = titleHTML;

      div.onclick = (e) => {
        if (e.target.classList.contains("delete-btn")) return;
        zeigeBericht(bericht);
      };

      const deleteBtn = document.createElement("button");
      deleteBtn.textContent = "🗑️";
      deleteBtn.className = "delete-btn";
      deleteBtn.title = "Bericht löschen";
      deleteBtn.onclick = (e) => {
        e.stopPropagation();
        const eingabe = prompt("Zum Löschen bitte Passwort eingeben:");
        if (eingabe === korrektesPasswort) {
          if (confirm("Bericht wirklich löschen?")) {
            berichte.splice(index, 1);
            localStorage.setItem("berichte", JSON.stringify(berichte));
            ladeBerichte();
          }
        } else {
          alert("Falsches Passwort!");
        }
      };

      div.appendChild(deleteBtn);
      berichteContainer.appendChild(div);
    });
  }

  function zeigeBericht(bericht) {
    alert(`${bericht.titel}\n${bericht.rang} ${bericht.name}\n\n${bericht.text}`);
  }

  ladeBerichte();
</script>

</body>
</html>
